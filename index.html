<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMP Analysis Tool</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .nav {
            text-align: center;
            margin: 20px 0;
        }
        .nav a {
            margin: 0 10px;
            color: #0057b8;
            text-decoration: none;
        }
        .nav a:hover {
            text-decoration: underline;
        }
    </style>
  <style>
    /* Spinner overlay styles */
    #spinner-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.85);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.3s;
    }
    .spinner {
      border: 8px solid #f3f3f3;
      border-top: 8px solid #3498db;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="spinner-overlay">
    <div class="spinner"></div>
  </div>
    <div class="container">
        <div class="nav">
            <a href="index.html">Home</a> | 
            <a href="example.html">Example</a> | 
            <a href="about.html">About</a> | 
            <a href="privacy.html">Privacy</a>
        </div>
        <h1>DMP Analyzer Demo</h1>
        <div id="api-status"></div>
        <div id="analysis-form" style="display: none;">
            <form id="dmp-form">
                <div class="form-group">
                    <label for="text-input">Enter your Data Management Plan (DMP) text for analysis:</label>
                    <textarea id="text-input" rows="10" placeholder="Paste your text here..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group half">
                        <label for="checklist-select">Assessment Criteria:</label>
                        <select id="checklist-select">
                            <option value="finnish_dmp_evaluation" selected>Finnish DMP Evaluation (Full)</option>
                            <option value="finnish_dmp_evaluation_1domain">Finnish DMP Evaluation (1 Domain)</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <label for="config-select">Analysis Configuration:</label>
                        <select id="config-select">
                            <option value="Full-GPT4-turbo-preview" selected>Full GPT-4 Turbo</option>
                            <option value="Domains-only-GPT4-turbo">Domains-only GPT-4 Turbo</option>
                        </select>
                    </div>
                </div>
                
                <div class="info-box">
                    <p><strong>Note:</strong> This demo uses the Finnish DMP evaluation criteria as an example. The tool supports multiple assessment frameworks.</p>
                    <p><strong>Reference:</strong> DMPTuuli working group. (2021). <a href="https://doi.org/10.5281/zenodo.4762326" target="_blank">Finnish DMP evaluation guidance</a>. Zenodo.</p>
                </div>
                <button type="submit" id="submit-btn">Run Analysis</button>
            </form>
            <div class="download-section">
                <p><a href="#" id="download-checklist-btn">Download Checklist</a></p>
            </div>
        </div>
        <div id="analysis-status" style="display: none;">
            <h2>Analysis Status</h2>
            <p id="status-message">Your DMP is being analyzed. This can take 2-5 minutes to complete...</p>
            <div class="loader"></div>
        </div>
        <div id="analysis-result" style="display: none;">
            <h2>Analysis Complete</h2>
            <p>Your analysis is ready. Click the button below to download the PDF report.</p>
            <button id="export-pdf-btn">Export PDF</button>
        </div>
    </div>
    <script src="app.js"></script>
  <script>
    // Hide spinner when everything is loaded
    window.addEventListener('load', function() {
      var spinner = document.getElementById('spinner-overlay');
      if (spinner) spinner.style.opacity = 0;
      setTimeout(function() {
        if (spinner) spinner.style.display = 'none';
      }, 400);
    });
  </script>
</body>
</html>
